# Vocalis Studio - 画面構成設計書

## 1. 概要

### 1.1 目的
本書は、Vocalis Studioアプリの画面構成を根本から見直し、ユーザーが継続的に練習を楽しめる体験を提供するための新しい画面アーキテクチャを定義する。

### 1.2 設計方針
- **目標達成型**: 練習の進捗が見え、達成感を感じられる
- **段階的学習**: 初心者から上級者まで段階的にスキルアップ
- **習慣化支援**: 毎日練習したくなる仕組み
- **成長の可視化**: 上達を実感できるフィードバック

## 2. 現状の問題点

### 2.1 現在の画面構成
```
現在：2画面のみ
├── RecordingView（録音画面）
└── RecordingListView（録音リスト）
```

### 2.2 問題点
1. **目的の不明確さ**: 何を練習すべきか分からない
2. **進捗の見えなさ**: 上達しているか判断できない
3. **モチベーション不足**: 継続する理由が弱い
4. **機能の少なさ**: 録音と再生のみで単調

## 3. 新しい画面構成

### 3.1 全体構成
```
VocalisStudio
├── Onboarding Flow（初回起動）
│   ├── WelcomeScreen
│   ├── VoiceRangeTestScreen
│   └── PersonalizationScreen
├── Main Flow（メインフロー）
│   ├── HomeScreen（ホーム）
│   ├── PracticeScreen（練習）
│   ├── AnalysisScreen（分析）
│   ├── ProgressScreen（進捗）
│   └── ProfileScreen（プロフィール）
├── Practice Flow（練習フロー）
│   ├── ExerciseSelectionScreen
│   ├── PreparationScreen
│   ├── RecordingScreen
│   └── ResultScreen
└── Sub Screens（サブ画面）
    ├── SettingsScreen
    ├── RecordingDetailScreen
    └── AchievementScreen
```

### 3.2 ナビゲーション構造
```
TabBar Navigation（底部タブ）
├── ホーム
├── 練習
├── 分析
├── 進捗
└── プロフィール
```

## 4. 画面詳細設計

### 4.1 Onboarding Flow

#### 4.1.1 WelcomeScreen（ようこそ画面）
**目的**: アプリの価値を伝え、ユーザーの期待を高める

**内容**:
- アプリロゴとキャッチコピー
- 3つの主要な価値提案
  - 「プロの練習メソッド」
  - 「成長の可視化」
  - 「楽しく続けられる」
- 「始める」ボタン

**デザイン**:
- フルスクリーン
- グラデーション背景
- アニメーション付きイラスト

#### 4.1.2 VoiceRangeTestScreen（音域測定画面）
**目的**: ユーザーの現在の音域を測定し、適切な練習を提案

**内容**:
- 音域測定の説明
- 低音から高音まで段階的にテスト
- リアルタイムピッチ表示
- 測定結果の表示

**機能**:
- マイク許可リクエスト
- ピッチ検出
- 音域の自動判定

#### 4.1.3 PersonalizationScreen（カスタマイズ画面）
**目的**: ユーザーの目標と好みを設定

**内容**:
- 練習目標の選択
  - 「音域を広げたい」
  - 「音程を正確にしたい」
  - 「声量を上げたい」
- 練習頻度の設定
- 通知設定

### 4.2 Main Flow

#### 4.2.1 HomeScreen（ホーム画面）
**目的**: デイリー練習への導線と全体状況の把握

**レイアウト**:
```
┌────────────────────────┐
│  こんにちは、〇〇さん    │
│  今日の練習 Day 7       │
├────────────────────────┤
│  今日のメニュー         │
│  ┌──────────────┐     │
│  │ 5音スケール    │     │
│  │ 推奨: 3セット  │     │
│  └──────────────┘     │
├────────────────────────┤
│  週間ストリーク         │
│  🔥 7日連続！          │
│  月 火 水 木 金 土 日    │
│  ✓  ✓  ✓  ✓  ✓  ✓  ✓   │
├────────────────────────┤
│  最近の成果            │
│  • 最高音更新 G5       │
│  • 音程正確率 85%      │
└────────────────────────┘
```

**機能**:
- デイリー練習メニュー提案
- ストリーク表示
- クイック練習開始ボタン
- 最近の成果サマリー

#### 4.2.2 PracticeScreen（練習画面）
**目的**: 様々な練習メニューから選択して実行

**レイアウト**:
```
┌────────────────────────┐
│  練習メニュー           │
├────────────────────────┤
│  基礎練習              │
│  ┌──────────────┐     │
│  │ 5音スケール    │     │
│  │ 難易度: ★☆☆   │     │
│  └──────────────┘     │
│  ┌──────────────┐     │
│  │ アルペジオ     │     │
│  │ 難易度: ★★☆   │     │
│  └──────────────┘     │
├────────────────────────┤
│  応用練習              │
│  ┌──────────────┐     │
│  │ ビブラート     │     │
│  │ 難易度: ★★★   │     │
│  └──────────────┘     │
└────────────────────────┘
```

**カテゴリ**:
- 基礎練習
- 音域拡張
- 音程トレーニング
- リズムトレーニング
- 応用テクニック

#### 4.2.3 AnalysisScreen（分析画面）
**目的**: 録音の詳細分析と改善点の把握

**レイアウト**:
```
┌────────────────────────┐
│  録音分析              │
├────────────────────────┤
│  最新の録音            │
│  2024/10/15 15:30      │
│                        │
│  [波形表示エリア]       │
│                        │
├────────────────────────┤
│  音程分析              │
│  正確率: 82%           │
│  [ピッチグラフ]         │
├────────────────────────┤
│  改善ポイント          │
│  • ファの音が低め      │
│  • 音の立ち上がり改善   │
└────────────────────────┘
```

**機能**:
- 波形表示
- ピッチ分析グラフ
- タイミング分析
- AIによる改善提案

#### 4.2.4 ProgressScreen（進捗画面）
**目的**: 長期的な成長を可視化

**レイアウト**:
```
┌────────────────────────┐
│  成長グラフ            │
│  [月間推移グラフ]       │
├────────────────────────┤
│  統計                  │
│  総練習時間: 12時間     │
│  総録音数: 156回       │
│  最長ストリーク: 14日   │
├────────────────────────┤
│  達成バッジ            │
│  🏆 🎵 🎤 🌟 🎯       │
├────────────────────────┤
│  スキルレベル          │
│  音域    ████░░ Lv.4   │
│  音程    ███░░░ Lv.3   │
│  リズム  █████░ Lv.5   │
└────────────────────────┘
```

**要素**:
- 成長グラフ（日/週/月）
- 練習統計
- 獲得バッジ
- スキルレベル表示

#### 4.2.5 ProfileScreen（プロフィール画面）
**目的**: 個人設定と成果の管理

**内容**:
- プロフィール情報
- 音域情報
- 目標設定
- 録音アーカイブ
- 設定へのリンク

### 4.3 Practice Flow（練習フロー）

#### 4.3.1 ExerciseSelectionScreen（練習選択画面）
**目的**: 練習内容の詳細確認と設定

**内容**:
- 練習の説明
- 難易度表示
- 設定オプション
  - テンポ
  - キー
  - 繰り返し回数
- 参考動画（あれば）
- 「練習開始」ボタン

#### 4.3.2 PreparationScreen（準備画面）
**目的**: 録音前の準備と確認

**内容**:
- マイクチェック
- 音量調整
- 姿勢チェックリスト
- カウントダウン開始

#### 4.3.3 RecordingScreen（録音画面）
**目的**: 実際の録音実行

**内容**:
- スケール再生
- リアルタイム波形
- 進捗インジケーター
- 現在の音表示
- 停止/一時停止ボタン

#### 4.3.4 ResultScreen（結果画面）
**目的**: 即座のフィードバックと次のアクション

**内容**:
- スコア表示（アニメーション付き）
- 良かった点
- 改善点
- 「もう一度」「保存」「分析を見る」ボタン
- シェア機能（オプション）

## 5. 画面遷移フロー

### 5.1 初回起動フロー
```
Launch
  ↓
WelcomeScreen
  ↓
VoiceRangeTestScreen
  ↓
PersonalizationScreen
  ↓
HomeScreen
```

### 5.2 デイリー練習フロー
```
HomeScreen
  ↓
  「今日の練習」タップ
  ↓
ExerciseSelectionScreen
  ↓
PreparationScreen
  ↓
RecordingScreen
  ↓
ResultScreen
  ↓
  「保存」→ HomeScreen
  「もう一度」→ PreparationScreen
  「分析」→ AnalysisScreen
```

### 5.3 自由練習フロー
```
PracticeScreen
  ↓
  練習メニュー選択
  ↓
ExerciseSelectionScreen
  ↓
  （以降はデイリー練習と同じ）
```

## 6. 画面間のデータフロー

### 6.1 共有データ
- ユーザープロフィール
- 練習履歴
- 設定情報
- 現在のセッション情報

### 6.2 状態管理
```swift
class AppState: ObservableObject {
    @Published var user: User
    @Published var currentSession: PracticeSession?
    @Published var recordings: [Recording]
    @Published var progress: UserProgress
}
```

## 7. UI/UXの考慮事項

### 7.1 画面遷移
- **スムーズな遷移**: 0.3秒以内
- **戻る操作**: 常に前画面に戻れる
- **状態保持**: 画面遷移時も状態維持

### 7.2 フィードバック
- **即座の反応**: ユーザーアクションへの即応答
- **進捗表示**: 長い処理中は進捗表示
- **成功体験**: 達成時の演出強化

### 7.3 エラーハンドリング
- **親切なメッセージ**: 技術的でない言葉
- **回復方法**: 次のアクション提示
- **データ保護**: エラー時もデータ保持

## 8. 実装優先順位

### Phase 1: コア機能（MVP）
1. HomeScreen（簡易版）
2. RecordingScreen（現行改良）
3. ResultScreen（基本フィードバック）
4. RecordingListScreen（現行改良）

### Phase 2: 成長体験
1. ProgressScreen
2. AnalysisScreen（基本分析）
3. ExerciseSelectionScreen
4. PreparationScreen

### Phase 3: エンゲージメント
1. Onboarding Flow
2. ProfileScreen
3. AchievementScreen
4. 高度な分析機能

## 9. 成功指標

### 9.1 KPI
- **DAU/MAU比率**: 50%以上
- **7日間継続率**: 40%以上
- **セッション長**: 平均10分以上
- **練習完了率**: 80%以上

### 9.2 定性指標
- 「毎日練習したくなる」
- 「上達を実感できる」
- 「操作が分かりやすい」

## 10. 技術的実装方針

### 10.1 Navigation
```swift
// Tab-based navigation
struct MainTabView: View {
    @State private var selectedTab = 0

    var body: some View {
        TabView(selection: $selectedTab) {
            HomeView().tag(0)
            PracticeView().tag(1)
            AnalysisView().tag(2)
            ProgressView().tag(3)
            ProfileView().tag(4)
        }
    }
}
```

### 10.2 Deep Linking
- 通知からの直接遷移
- ショートカット対応
- Widget連携

### 10.3 State Management
- SwiftUI + Combine
- @EnvironmentObject活用
- UserDefaults連携

## 更新履歴

| 日付 | バージョン | 変更内容 |
|------|-----------|----------|
| 2025-10-15 | 1.0 | 初版作成 |